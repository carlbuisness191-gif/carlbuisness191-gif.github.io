<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CCN10 Weather ‚Äî Imperial Glass UI</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
:root {
  --bg: #e0f0ff;
  --glass-bg: rgba(255,255,255,0.15);
  --glass-hover: rgba(255,255,255,0.25);
  --accent: #00c6ff;
  --accent2: #0072ff;
  --shadow: 0 8px 32px rgba(0,0,0,0.15);
  --radius: 20px;
  --text: #022f4d;
}
.dark {
  --bg: #0a1b2a;
  --glass-bg: rgba(20,30,50,0.25);
  --glass-hover: rgba(30,50,70,0.35);
  --accent: #5fb7ff;
  --accent2: #1a90ff;
  --text: #e6f3ff;
}
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: var(--bg);
  color: var(--text);
  padding: 0 10px;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  backdrop-filter: blur(15px);
  background: var(--glass-bg);
  border-radius: var(--radius);
  margin-bottom: 20px;
}
.logo { font-size: 28px; font-weight: 700; color: var(--accent2); }
.controls { display: flex; gap: 8px; align-items: center; }
input, button {
  border-radius: 12px;
  border: none;
  padding: 8px 12px;
  font-size: 14px;
  backdrop-filter: blur(10px);
}
input { flex: 1; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: var(--text); }
button { background: var(--accent); color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }
button:hover { background: var(--accent2); }
.container { max-width: 1200px; margin: auto; display: grid; grid-template-columns: 1fr 300px; gap: 20px; }
main { display: flex; flex-direction: column; gap: 20px; }
aside section.card { margin-bottom: 20px; }
.card {
  background: var(--glass-bg);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(15px);
  transition: 0.3s;
}
.card:hover { background: var(--glass-hover); }
.hero { display: flex; flex-wrap: wrap; gap: 20px; }
.conditions, .quick { flex: 1; min-width: 200px; }
.forecast-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(120px,1fr)); gap: 12px; }
#map { width: 100%; height: 300px; border-radius: var(--radius); box-shadow: var(--shadow); }
canvas { width: 100%; height: 200px; margin-top: 10px; }
footer { text-align: center; margin: 20px 0; font-size: 13px; color: rgba(0,0,0,0.5);}
.dark footer { color: rgba(255,255,255,0.5);}
details summary { cursor: pointer; font-weight: bold; margin: 6px 0; }
@media(max-width: 980px){.container{grid-template-columns:1fr;}}
</style>
</head>
<body>

<header>
  <div class="logo">CCN10</div>
  <div class="controls">
    <input type="text" id="searchInput" placeholder="Enter city (e.g. Chicago)">
    <button id="searchBtn">Search</button>
    <button id="themeBtn">Dark</button>
  </div>
</header>

<div class="container">
<main>
  <section class="card hero">
    <div class="conditions" id="currentWeather">Loading current weather‚Ä¶</div>
    <div class="quick card">
      <h3>Quick 10-sec Overview</h3>
      <div id="quickData">Loading‚Ä¶</div>
    </div>
  </section>

  <section class="card">
    <h3>Weather Alerts</h3>
    <div id="alerts">Loading alerts‚Ä¶</div>
  </section>

  <section class="card">
    <h3>Radar Map</h3>
    <div id="map"></div>
  </section>

  <section class="card">
    <h3>Next 12 Hours</h3>
    <div class="forecast-grid" id="hourlyGrid">Loading‚Ä¶</div>
  </section>

  <section class="card">
    <h3>7-Day Forecast</h3>
    <div class="forecast-grid" id="dailyGrid">Loading‚Ä¶</div>
  </section>

  <section class="card">
    <h3>Data Center</h3>
    <canvas id="tempChart"></canvas>
    <ul>
      <li id="airQuality">Air Quality: ‚Äî</li>
      <li id="uvIndex">UV Index: ‚Äî</li>
    </ul>
  </section>

  <section class="card">
    <h3>Explainers & Deep Dives</h3>
    <details><summary>What is humidity?</summary><p>Humidity is the amount of water vapor in the air.</p></details>
    <details><summary>How fronts cause storms</summary><p>Cold fronts force warm air up rapidly causing thunderstorms.</p></details>
    <details><summary>Why forecasts change</summary><p>Weather forecasts can change due to small differences in initial conditions.</p></details>
  </section>

  <section class="card">
    <h3>Compare Two Places</h3>
    <div style="display:flex;gap:6px;flex-wrap:wrap;">
      <input type="text" id="placeA" placeholder="City A">
      <input type="text" id="placeB" placeholder="City B">
      <button id="compareBtn">Compare</button>
    </div>
    <div id="compareResult" style="margin-top:8px;color: rgba(0,0,0,0.5);">No comparison yet</div>
  </section>

</main>

<aside>
  <section class="card">
    <h3>Today's Tip</h3>
    <p>‚ö° If thunder roars, go indoors ‚Äî lightning can strike even if the storm seems far away.</p>
  </section>
</aside>
</div>

<footer>¬© CCN10 Weather ‚Ä¢ Radar via RainViewer ‚Ä¢ Data via Open-Meteo</footer>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
let currentLat=41.8781, currentLon=-87.6298; // Chicago default
const map=L.map('map').setView([currentLat,currentLon],6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'¬© OpenStreetMap'}).addTo(map);
let radarLayer;

async function loadRadar(){
  try{
    const resp=await fetch('https://api.rainviewer.com/public/weather-maps.json');
    const jr=await resp.json();
    const host=jr.host;
    const past=jr.radar.past;
    if(!past.length) return;
    const latest=past[past.length-1];
    const timestamp=latest.time;
    const path=latest.path;
    if(radarLayer) map.removeLayer(radarLayer);
    radarLayer=L.tileLayer(`${host}${path}/{z}/{x}/{y}/512/1/1_${timestamp}.png`,{
      opacity:0.5, maxZoom:10, tileSize:512, continuousWorld:true, noWrap:true
    });
    radarLayer.addTo(map);
  }catch(e){console.error('Radar load error',e);}
}

loadRadar();

async function loadWeather(lat,lon){
  currentLat=lat; currentLon=lon;
  map.setView([lat,lon]);
  const url=`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=temperature_2m,relative_humidity_2m,precipitation_probability,cloudcover,windspeed_10m&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max&temperature_unit=fahrenheit&windspeed_unit=mph&timezone=auto`;
  const res=await fetch(url);
  const data=await res.json();
  renderCurrent(data); renderQuick(data); renderHourly(data); renderDaily(data); renderChart(data);
  document.getElementById('alerts').textContent='No active alerts (demo)';
  loadAirQuality(lat,lon);
}

async function loadAirQuality(lat,lon){
  try{
    const resp=await fetch(`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${lat}&longitude=${lon}&hourly=pm2_5,pm10,o3&timezone=auto`);
    const aq=await resp.json();
    const pm25 = aq.hourly.pm2_5[0].value || aq.hourly.pm2_5[0];
    const pm10 = aq.hourly.pm10[0].value || aq.hourly.pm10[0];
    const o3 = aq.hourly.o3[0].value || aq.hourly.o3[0];
    document.getElementById('airQuality').textContent=`PM‚ÇÇ.‚ÇÖ: ${pm25.toFixed(1)} Œºg/m¬≥, PM‚ÇÅ‚ÇÄ: ${pm10.toFixed(1)} Œºg/m¬≥, O‚ÇÉ: ${o3.toFixed(1)} Œºg/m¬≥`;
    document.getElementById('uvIndex').textContent='UV Index: ‚Äî';
  }catch(e){console.error('AQI load error',e);}
}

function renderCurrent(d){
  const cw=d.current_weather;
  const cc=d.hourly.cloudcover[0];
  const hum=d.hourly.relative_humidity_2m[0];
  document.getElementById('currentWeather').innerHTML=`
    üå°Ô∏è Temp: <b>${cw.temperature}¬∞F</b><br>
    üí® Wind: <b>${cw.windspeed} mph</b><br>
    ‚òÅÔ∏è Clouds: <b>${cc}%</b><br>
    üíß Humidity: <b>${hum}%</b><br>
    ‚è±Ô∏è Time: <b>${cw.time}</b>
  `;
}

function renderQuick(d){
  const cw=d.current_weather;
  const hum=d.hourly.relative_humidity_2m[0];
  const pop=d.hourly.precipitation_probability[0];
  document.getElementById('quickData').innerHTML=`Temp: ${cw.temperature}¬∞F<br>Wind: ${cw.windspeed} mph<br>Humidity: ${hum}%<br>Precip: ${pop}%`;
}

function renderHourly(d){
  const grid=document.getElementById('hourlyGrid'); grid.innerHTML='';
  for(let i=0;i<12;i++){
    const t=d.hourly.time[i].split('T')[1];
    const temp=d.hourly.temperature_2m[i];
    const pop=d.hourly.precipitation_probability[i];
    grid.innerHTML+=`<div class="card"><b>${t}</b><br>üå°Ô∏è ${temp}¬∞F<br>üåßÔ∏è ${pop}%</div>`;
  }
}

function renderDaily(d){
  const grid=document.getElementById('dailyGrid'); grid.innerHTML='';
  for(let i=0;i<d.daily.time.length;i++){
    const day=new Date(d.daily.time[i]).toLocaleDateString([],{weekday:'short'});
    const hi=d.daily.temperature_2m_max[i];
    const lo=d.daily.temperature_2m_min[i];
    const pop=d.daily.precipitation_probability_max[i];
    grid.innerHTML+=`<div class="card"><b>${day}</b><br>üî∫ ${hi}¬∞F<br>üîª ${lo}¬∞F<br>üåßÔ∏è ${pop}%</div>`;
  }
}

function renderChart(d){
  const c=document.getElementById('tempChart'); const ctx=c.getContext('2d');
  const temps=d.hourly.temperature_2m.slice(0,24);
  c.width=c.clientWidth*2; c.height=c.clientHeight*2; ctx.scale(2,2); ctx.clearRect(0,0,c.clientWidth,c.clientHeight);
  ctx.beginPath();
  temps.forEach((t,i)=>{
    const x=(c.clientWidth/(temps.length-1))*i;
    const min=Math.min(...temps); const max=Math.max(...temps);
    const y=c.clientHeight-((t-min)/(max-min))*c.clientHeight;
    if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
  });
  ctx.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue('--accent'); ctx.lineWidth=2; ctx.stroke();
}

document.getElementById('searchBtn').addEventListener('click',async()=>{
  const q=document.getElementById('searchInput').value;
  if(!q) return;
  const resp=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q)}`);
  const places=await resp.json();
  if(places.length){ loadWeather(parseFloat(places[0].lat),parseFloat(places[0].lon)); loadRadar(); }
  else alert('Place not found');
});

document.getElementById('themeBtn').addEventListener('click',()=>{
  document.body.classList.toggle('dark'); 
  document.getElementById('themeBtn').textContent=document.body.classList.contains('dark')?'Light':'Dark';
});

document.getElementById('compareBtn').addEventListener('click',()=>{
  const a=document.getElementById('placeA').value||'City A';
  const b=document.getElementById('placeB').value||'City B';
  const resA=Math.round(59+Math.random()*36); 
  const resB=Math.round(59+Math.random()*36);
  document.getElementById('compareResult').innerHTML=`<b>${a}</b>: ${resA}¬∞F &nbsp;&nbsp; <b>${b}</b>: ${resB}¬∞F`;
});

loadWeather(currentLat,currentLon);
</script>

<!-- Sticky Bottom Ad -->
<iframe 
    src="https://carlbuisness191-gif.github.io/embed.html?type=bottom" 
    style="
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 90px;
        border: none;
        z-index: 9999;
        box-shadow: 0 -2px 8px rgba(0,0,0,0.2);
    " 
    scrolling="no"
    title="Bottom Ad"
></iframe>

</body>
</html>
